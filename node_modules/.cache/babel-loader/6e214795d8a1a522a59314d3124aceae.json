{"ast":null,"code":"var _jsxFileName = \"/Volumes/Olina Wu/React projects/Team-Reactor/src/Chat/ChatBoxComponent/TextBox.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport FirebaseContext from '../../Firebase';\n\nfunction TextBox(props) {\n  const [messageContent, setMessageContent] = useState('');\n  const [messageSent, setMessageSent] = useState(false);\n  const chatID = props.chatID;\n  const user = props.user;\n  var allMessages = props.allMessages;\n  const firebase = useContext(FirebaseContext);\n  var d = new Date();\n\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    name === 'messageSent' ? setMessageSent(true) : setMessageContent(value);\n  }\n\n  useEffect(() => {\n    if (messageSent === true) {\n      const content = messageContent;\n      setMessageContent('');\n      setMessageSent(false);\n      var messages = firebase.db.collection('messages').doc(chatID);\n      return messages.update({\n        [Object.keys(allMessages).length]: [d.getTime(), user, content]\n      }).then(function () {\n        console.log('Document successfully updated!');\n      }).catch(function (error) {\n        // The document probably doesn't exist.\n        console.error('Error updating document: ', error);\n      });\n    }\n  }, [messageSent]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: messageContent,\n    name: \"messageContent\",\n    placeholder: \"Type your message...\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"messageSent\",\n    onClick: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }\n  }, \"send\"));\n}\n\nexport default TextBox;","map":{"version":3,"sources":["/Volumes/Olina Wu/React projects/Team-Reactor/src/Chat/ChatBoxComponent/TextBox.js"],"names":["React","useContext","useEffect","useState","FirebaseContext","TextBox","props","messageContent","setMessageContent","messageSent","setMessageSent","chatID","user","allMessages","firebase","d","Date","handleChange","event","name","value","target","content","messages","db","collection","doc","update","Object","keys","length","getTime","then","console","log","catch","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,eAAP,MAA4B,gBAA5B;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACvB,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCL,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACM,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAMQ,MAAM,GAAGL,KAAK,CAACK,MAArB;AACA,QAAMC,IAAI,GAAGN,KAAK,CAACM,IAAnB;AACA,MAAIC,WAAW,GAAGP,KAAK,CAACO,WAAxB;AACA,QAAMC,QAAQ,GAAGb,UAAU,CAACG,eAAD,CAA3B;AACA,MAAIW,CAAC,GAAG,IAAIC,IAAJ,EAAR;;AAEA,WAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC5B,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,KAAK,CAACG,MAA9B;AACAF,IAAAA,IAAI,KAAK,aAAT,GAAyBT,cAAc,CAAC,IAAD,CAAvC,GAAgDF,iBAAiB,CAACY,KAAD,CAAjE;AACA;;AAEDlB,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIO,WAAW,KAAK,IAApB,EAA0B;AACzB,YAAMa,OAAO,GAAGf,cAAhB;AACAC,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACA,UAAIa,QAAQ,GAAGT,QAAQ,CAACU,EAAT,CAAYC,UAAZ,CAAuB,UAAvB,EAAmCC,GAAnC,CAAuCf,MAAvC,CAAf;AACA,aAAOY,QAAQ,CACbI,MADK,CACE;AACP,SAACC,MAAM,CAACC,IAAP,CAAYhB,WAAZ,EAAyBiB,MAA1B,GAAmC,CAACf,CAAC,CAACgB,OAAF,EAAD,EAAcnB,IAAd,EAAoBU,OAApB;AAD5B,OADF,EAILU,IAJK,CAIA,YAAY;AACjBC,QAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACA,OANK,EAOLC,KAPK,CAOC,UAAUC,KAAV,EAAiB;AACvB;AACAH,QAAAA,OAAO,CAACG,KAAR,CAAc,2BAAd,EAA2CA,KAA3C;AACA,OAVK,CAAP;AAWA;AACD,GAlBQ,EAkBN,CAAC3B,WAAD,CAlBM,CAAT;AAoBA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AACC,IAAA,IAAI,EAAC,MADN;AAEC,IAAA,KAAK,EAAEF,cAFR;AAGC,IAAA,IAAI,EAAC,gBAHN;AAIC,IAAA,WAAW,EAAC,sBAJb;AAKC,IAAA,QAAQ,EAAEU,YALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAQC;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,IAAI,EAAC,aAA3B;AAAyC,IAAA,OAAO,EAAEA,YAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARD,CADD;AAcA;;AAED,eAAeZ,OAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport FirebaseContext from '../../Firebase';\n\nfunction TextBox(props) {\n\tconst [messageContent, setMessageContent] = useState('');\n\tconst [messageSent, setMessageSent] = useState(false);\n\tconst chatID = props.chatID;\n\tconst user = props.user;\n\tvar allMessages = props.allMessages;\n\tconst firebase = useContext(FirebaseContext);\n\tvar d = new Date();\n\n\tfunction handleChange(event) {\n\t\tconst { name, value } = event.target;\n\t\tname === 'messageSent' ? setMessageSent(true) : setMessageContent(value);\n\t}\n\n\tuseEffect(() => {\n\t\tif (messageSent === true) {\n\t\t\tconst content = messageContent;\n\t\t\tsetMessageContent('');\n\t\t\tsetMessageSent(false);\n\t\t\tvar messages = firebase.db.collection('messages').doc(chatID);\n\t\t\treturn messages\n\t\t\t\t.update({\n\t\t\t\t\t[Object.keys(allMessages).length]: [d.getTime(), user, content],\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tconsole.log('Document successfully updated!');\n\t\t\t\t})\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\t// The document probably doesn't exist.\n\t\t\t\t\tconsole.error('Error updating document: ', error);\n\t\t\t\t});\n\t\t}\n\t}, [messageSent]);\n\n\treturn (\n\t\t<div>\n\t\t\t<input\n\t\t\t\ttype='text'\n\t\t\t\tvalue={messageContent}\n\t\t\t\tname='messageContent'\n\t\t\t\tplaceholder='Type your message...'\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t<button type='button' name='messageSent' onClick={handleChange}>\n\t\t\t\tsend\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nexport default TextBox;\n"]},"metadata":{},"sourceType":"module"}